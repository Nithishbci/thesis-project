{"filter":false,"title":"deploy-eb.yml","tooltip":"/.github/workflows/deploy-eb.yml","undoManager":{"mark":25,"position":25,"stack":[[{"start":{"row":0,"column":0},"end":{"row":52,"column":0},"action":"insert","lines":["name: Deploy Flask App to Elastic Beanstalk","","on:","  push:","    branches: [\"main\"]","","jobs:","  deploy:","    runs-on: ubuntu-latest","","    steps:","    - name: Checkout repository","      uses: actions/checkout@v3","","    - name: Set up Python","      uses: actions/setup-python@v4","      with:","        python-version: \"3.9\"","","    - name: Install dependencies","      run: |","        python -m pip install --upgrade pip","        pip install -r requirements.txt","","    - name: Zip application","      run: |","        zip -r app.zip . -x \"*.git*\"","","    - name: Configure AWS Credentials","      uses: aws-actions/configure-aws-credentials@v2","      with:","        aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}","        aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","        aws-region: ${{ secrets.AWS_REGION }}","","    - name: Upload new version to Elastic Beanstalk","      run: |","        aws elasticbeanstalk create-application-version \\","          --application-name \"${{ secrets.EB_APP_NAME }}\" \\","          --version-label \"build-${{ github.run_number }}\" \\","          --source-bundle S3Bucket=\"elasticbeanstalk-${{ secrets.AWS_REGION }}-${{ secrets.AWS_ACCESS_KEY_ID }}\",S3Key=\"app-${{ github.run_number }}.zip\"","","    - name: Upload ZIP to S3","      run: |","        aws s3 cp app.zip \\","        s3://elasticbeanstalk-${{ secrets.AWS_REGION }}-${{ secrets.AWS_ACCESS_KEY_ID }}/app-${{ github.run_number }}.zip","","    - name: Deploy application version","      run: |","        aws elasticbeanstalk update-environment \\","          --environment-name \"${{ secrets.EB_ENV_NAME }}\" \\","          --version-label \"build-${{ github.run_number }}\"",""],"id":11}],[{"start":{"row":0,"column":0},"end":{"row":52,"column":0},"action":"remove","lines":["name: Deploy Flask App to Elastic Beanstalk","","on:","  push:","    branches: [\"main\"]","","jobs:","  deploy:","    runs-on: ubuntu-latest","","    steps:","    - name: Checkout repository","      uses: actions/checkout@v3","","    - name: Set up Python","      uses: actions/setup-python@v4","      with:","        python-version: \"3.9\"","","    - name: Install dependencies","      run: |","        python -m pip install --upgrade pip","        pip install -r requirements.txt","","    - name: Zip application","      run: |","        zip -r app.zip . -x \"*.git*\"","","    - name: Configure AWS Credentials","      uses: aws-actions/configure-aws-credentials@v2","      with:","        aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}","        aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","        aws-region: ${{ secrets.AWS_REGION }}","","    - name: Upload new version to Elastic Beanstalk","      run: |","        aws elasticbeanstalk create-application-version \\","          --application-name \"${{ secrets.EB_APP_NAME }}\" \\","          --version-label \"build-${{ github.run_number }}\" \\","          --source-bundle S3Bucket=\"elasticbeanstalk-${{ secrets.AWS_REGION }}-${{ secrets.AWS_ACCESS_KEY_ID }}\",S3Key=\"app-${{ github.run_number }}.zip\"","","    - name: Upload ZIP to S3","      run: |","        aws s3 cp app.zip \\","        s3://elasticbeanstalk-${{ secrets.AWS_REGION }}-${{ secrets.AWS_ACCESS_KEY_ID }}/app-${{ github.run_number }}.zip","","    - name: Deploy application version","      run: |","        aws elasticbeanstalk update-environment \\","          --environment-name \"${{ secrets.EB_ENV_NAME }}\" \\","          --version-label \"build-${{ github.run_number }}\"",""],"id":12},{"start":{"row":0,"column":0},"end":{"row":42,"column":0},"action":"insert","lines":["name: Deploy Flask App to Elastic Beanstalk","","on:","  push:","    branches: [\"main\"]","","jobs:","  deploy:","      runs-on: ubuntu-latest","      needs: build_and_test","    ","      steps:","        - name: Download artifact","          uses: actions/download-artifact@v4","          with:","            name: deploy-package","    ","        # ---------------------------------------------------------","        # Correct AWS Credentials Configuration","        # ---------------------------------------------------------","        - name: Configure AWS Credentials","          uses: aws-actions/configure-aws-credentials@v4","          with:","            aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}","            aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","            aws-region: us-east-1","    ","        # ---------------------------------------------------------","        # Deploy to Elastic Beanstalk","        # ---------------------------------------------------------","        - name: Deploy to Elastic Beanstalk","          uses: einaregilsson/beanstalk-deploy@v21","          with:","            aws_access_key: ${{ secrets.AWS_ACCESS_KEY_ID }}","            aws_secret_key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","            application_name: Devops-x23300841-eb","            environment_name: Devops-x23300841-eb-env","            version_label: \"build-${{ github.run_number }}\"","            region: us-east-1","            deployment_package: deploy.zip","            wait_for_deployment: true","",""]}],[{"start":{"row":0,"column":0},"end":{"row":42,"column":0},"action":"remove","lines":["name: Deploy Flask App to Elastic Beanstalk","","on:","  push:","    branches: [\"main\"]","","jobs:","  deploy:","      runs-on: ubuntu-latest","      needs: build_and_test","    ","      steps:","        - name: Download artifact","          uses: actions/download-artifact@v4","          with:","            name: deploy-package","    ","        # ---------------------------------------------------------","        # Correct AWS Credentials Configuration","        # ---------------------------------------------------------","        - name: Configure AWS Credentials","          uses: aws-actions/configure-aws-credentials@v4","          with:","            aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}","            aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","            aws-region: us-east-1","    ","        # ---------------------------------------------------------","        # Deploy to Elastic Beanstalk","        # ---------------------------------------------------------","        - name: Deploy to Elastic Beanstalk","          uses: einaregilsson/beanstalk-deploy@v21","          with:","            aws_access_key: ${{ secrets.AWS_ACCESS_KEY_ID }}","            aws_secret_key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","            application_name: Devops-x23300841-eb","            environment_name: Devops-x23300841-eb-env","            version_label: \"build-${{ github.run_number }}\"","            region: us-east-1","            deployment_package: deploy.zip","            wait_for_deployment: true","",""],"id":13},{"start":{"row":0,"column":0},"end":{"row":34,"column":0},"action":"insert","lines":["name: Deploy Flask App to Elastic Beanstalk","","on:","  push:","    branches: [\"main\"]","","jobs:","  deploy:","    runs-on: ubuntu-latest","    ","    steps:","      - name: Download artifact","        uses: actions/download-artifact@v4","        with:","          name: deploy-package","","      - name: Configure AWS Credentials","        uses: aws-actions/configure-aws-credentials@v4","        with:","          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}","          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","          aws-region: us-east-1","","      - name: Deploy to Elastic Beanstalk","        uses: einaregilsson/beanstalk-deploy@v21","        with:","          aws_access_key: ${{ secrets.AWS_ACCESS_KEY_ID }}","          aws_secret_key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","          application_name: Devops-x23300841-eb","          environment_name: Devops-x23300841-eb-env","          version_label: \"build-${{ github.run_number }}\"","          region: us-east-1","          deployment_package: deploy.zip","          wait_for_deployment: true",""]}],[{"start":{"row":0,"column":0},"end":{"row":34,"column":0},"action":"remove","lines":["name: Deploy Flask App to Elastic Beanstalk","","on:","  push:","    branches: [\"main\"]","","jobs:","  deploy:","    runs-on: ubuntu-latest","    ","    steps:","      - name: Download artifact","        uses: actions/download-artifact@v4","        with:","          name: deploy-package","","      - name: Configure AWS Credentials","        uses: aws-actions/configure-aws-credentials@v4","        with:","          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}","          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","          aws-region: us-east-1","","      - name: Deploy to Elastic Beanstalk","        uses: einaregilsson/beanstalk-deploy@v21","        with:","          aws_access_key: ${{ secrets.AWS_ACCESS_KEY_ID }}","          aws_secret_key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","          application_name: Devops-x23300841-eb","          environment_name: Devops-x23300841-eb-env","          version_label: \"build-${{ github.run_number }}\"","          region: us-east-1","          deployment_package: deploy.zip","          wait_for_deployment: true",""],"id":14},{"start":{"row":0,"column":0},"end":{"row":156,"column":0},"action":"insert","lines":["name: Django CI/CD to Elastic Beanstalk","","on:","  push:","    branches:","      - main","","jobs:","","  # ============================================================","  # 1️⃣ PREBUILD STAGE","  # ============================================================","  prebuild:","    runs-on: ubuntu-latest","","    steps:","      - name: Checkout repo","        uses: actions/checkout@v3","","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: \"3.11\"","","      - name: Install dependencies","        run: |","          pip install --upgrade pip","          pip install -r requirements.txt","","      - name: Install OS dependencies","        run: |","          sudo apt-get update","          sudo apt-get install -y jq unzip wget","","      - name: Install Java 17 (Amazon Corretto)","        run: |","          wget https://corretto.aws/downloads/latest/amazon-corretto-17-x64-linux-jdk.deb","          sudo dpkg -i amazon-corretto-17-x64-linux-jdk.deb","          java --version","","","  # ============================================================","  # 2️⃣ BUILD + TEST STAGE","  # ============================================================","  build_and_test:","    runs-on: ubuntu-latest","    needs: prebuild","","    steps:","      - uses: actions/checkout@v3","","      - uses: actions/setup-python@v4","        with:","          python-version: \"3.11\"","","      - name: Install project dependencies","        run: |","          pip install --upgrade pip","          pip install -r requirements.txt","          pip install pylint","","      - name: Run collectstatic","        run: |","          python manage.py collectstatic --noinput","","      - name: Pylint","        continue-on-error: true","        run: pylint . || true","","      - name: Run Django Tests","        run: python manage.py test || true","","","  # ============================================================","  # 3️⃣ SONAR SCAN STAGE","  # ============================================================","  sonar_scan:","    runs-on: ubuntu-latest","    needs: build_and_test","","    steps:","      - uses: actions/checkout@v3","","      - name: Install Sonar Scanner","        run: |","          wget https://binaries.sonarsource.com/Distribution/sonar-scanner-cli/sonar-scanner-cli-5.0.1.3006-linux.zip","          unzip sonar-scanner-cli-5.0.1.3006-linux.zip","          mv sonar-scanner-5.0.1.3006-linux sonar-scanner","          echo \"${{ github.workspace }}/sonar-scanner/bin\" >> $GITHUB_PATH","","      - name: Run SonarCloud Scan","        env:","          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}","          SONAR_PROJECT_KEY: ${{ secrets.SONAR_PROJECT_KEY }}","          SONAR_ORG: ${{ secrets.SONAR_ORG }}","        run: |","          sonar-scanner \\","            -Dsonar.login=$SONAR_TOKEN \\","            -Dsonar.host.url=https://sonarcloud.io \\","            -Dsonar.projectKey=$SONAR_PROJECT_KEY \\","            -Dsonar.organization=$SONAR_ORG \\","            -Dsonar.coverage.exclusions=**/* || true","","","  # ============================================================","  # 4️⃣ PACKAGE ARTIFACT","  # ============================================================","  package:","    runs-on: ubuntu-latest","    needs: sonar_scan","","    steps:","      - uses: actions/checkout@v3","","      - name: Create ZIP for Elastic Beanstalk","        run: |","          zip -r deploy.zip . -x \"*.git*\" \".github/*\"","","      - name: Upload artifact","        uses: actions/upload-artifact@v4","        with:","          name: deploy-package","          path: deploy.zip","","","  # ============================================================","  # 5️⃣ DEPLOY TO ELASTIC BEANSTALK","  # ============================================================","  deploy:","    runs-on: ubuntu-latest","    needs: package","","    steps:","      - name: Download artifact","        uses: actions/download-artifact@v4","        with:","          name: deploy-package","","      - name: Configure AWS Credentials","        uses: aws-actions/configure-aws-credentials@v4","        with:","          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}","          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","          aws-region: us-east-1","","      - name: Deploy to Elastic Beanstalk","        uses: einaregilsson/beanstalk-deploy@v21","        with:","          aws_access_key: ${{ secrets.AWS_ACCESS_KEY_ID }}","          aws_secret_key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","          application_name: Devops-x23300841-eb","          environment_name: Devops-x23300841-eb-env","          region: us-east-1","          deployment_package: deploy.zip","          version_label: \"build-${{ github.run_number }}\"","          wait_for_deployment: true",""]}],[{"start":{"row":72,"column":0},"end":{"row":102,"column":0},"action":"remove","lines":["","  # ============================================================","  # 3️⃣ SONAR SCAN STAGE","  # ============================================================","  sonar_scan:","    runs-on: ubuntu-latest","    needs: build_and_test","","    steps:","      - uses: actions/checkout@v3","","      - name: Install Sonar Scanner","        run: |","          wget https://binaries.sonarsource.com/Distribution/sonar-scanner-cli/sonar-scanner-cli-5.0.1.3006-linux.zip","          unzip sonar-scanner-cli-5.0.1.3006-linux.zip","          mv sonar-scanner-5.0.1.3006-linux sonar-scanner","          echo \"${{ github.workspace }}/sonar-scanner/bin\" >> $GITHUB_PATH","","      - name: Run SonarCloud Scan","        env:","          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}","          SONAR_PROJECT_KEY: ${{ secrets.SONAR_PROJECT_KEY }}","          SONAR_ORG: ${{ secrets.SONAR_ORG }}","        run: |","          sonar-scanner \\","            -Dsonar.login=$SONAR_TOKEN \\","            -Dsonar.host.url=https://sonarcloud.io \\","            -Dsonar.projectKey=$SONAR_PROJECT_KEY \\","            -Dsonar.organization=$SONAR_ORG \\","            -Dsonar.coverage.exclusions=**/* || true",""],"id":15}],[{"start":{"row":40,"column":0},"end":{"row":72,"column":0},"action":"remove","lines":["","  # ============================================================","  # 2️⃣ BUILD + TEST STAGE","  # ============================================================","  build_and_test:","    runs-on: ubuntu-latest","    needs: prebuild","","    steps:","      - uses: actions/checkout@v3","","      - uses: actions/setup-python@v4","        with:","          python-version: \"3.11\"","","      - name: Install project dependencies","        run: |","          pip install --upgrade pip","          pip install -r requirements.txt","          pip install pylint","","      - name: Run collectstatic","        run: |","          python manage.py collectstatic --noinput","","      - name: Pylint","        continue-on-error: true","        run: pylint . || true","","      - name: Run Django Tests","        run: python manage.py test || true","",""],"id":16}],[{"start":{"row":33,"column":0},"end":{"row":38,"column":24},"action":"remove","lines":["","      - name: Install Java 17 (Amazon Corretto)","        run: |","          wget https://corretto.aws/downloads/latest/amazon-corretto-17-x64-linux-jdk.deb","          sudo dpkg -i amazon-corretto-17-x64-linux-jdk.deb","          java --version"],"id":17}],[{"start":{"row":34,"column":0},"end":{"row":35,"column":0},"action":"remove","lines":["",""],"id":18},{"start":{"row":33,"column":0},"end":{"row":34,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":0,"column":0},"end":{"row":87,"column":0},"action":"remove","lines":["name: Django CI/CD to Elastic Beanstalk","","on:","  push:","    branches:","      - main","","jobs:","","  # ============================================================","  # 1️⃣ PREBUILD STAGE","  # ============================================================","  prebuild:","    runs-on: ubuntu-latest","","    steps:","      - name: Checkout repo","        uses: actions/checkout@v3","","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: \"3.11\"","","      - name: Install dependencies","        run: |","          pip install --upgrade pip","          pip install -r requirements.txt","","      - name: Install OS dependencies","        run: |","          sudo apt-get update","          sudo apt-get install -y jq unzip wget","","","  # ============================================================","  # 4️⃣ PACKAGE ARTIFACT","  # ============================================================","  package:","    runs-on: ubuntu-latest","    needs: sonar_scan","","    steps:","      - uses: actions/checkout@v3","","      - name: Create ZIP for Elastic Beanstalk","        run: |","          zip -r deploy.zip . -x \"*.git*\" \".github/*\"","","      - name: Upload artifact","        uses: actions/upload-artifact@v4","        with:","          name: deploy-package","          path: deploy.zip","","","  # ============================================================","  # 5️⃣ DEPLOY TO ELASTIC BEANSTALK","  # ============================================================","  deploy:","    runs-on: ubuntu-latest","    needs: package","","    steps:","      - name: Download artifact","        uses: actions/download-artifact@v4","        with:","          name: deploy-package","","      - name: Configure AWS Credentials","        uses: aws-actions/configure-aws-credentials@v4","        with:","          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}","          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","          aws-region: us-east-1","","      - name: Deploy to Elastic Beanstalk","        uses: einaregilsson/beanstalk-deploy@v21","        with:","          aws_access_key: ${{ secrets.AWS_ACCESS_KEY_ID }}","          aws_secret_key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","          application_name: Devops-x23300841-eb","          environment_name: Devops-x23300841-eb-env","          region: us-east-1","          deployment_package: deploy.zip","          version_label: \"build-${{ github.run_number }}\"","          wait_for_deployment: true",""],"id":20},{"start":{"row":0,"column":0},"end":{"row":106,"column":0},"action":"insert","lines":["name: Django CI/CD to Elastic Beanstalk","","on:","  push:","    branches:","      - main","","jobs:","","  # ============================================================","  # 1️⃣ PREBUILD STAGE","  # ============================================================","  prebuild:","    runs-on: ubuntu-latest","","    steps:","      - name: Checkout repo","        uses: actions/checkout@v3","","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: \"3.11\"","","      - name: Install OS Dependencies","        run: |","          sudo apt-get update","          sudo apt-get install -y jq unzip wget","","","  # ============================================================","  # 2️⃣ BUILD STAGE","  # ============================================================","  build:","    runs-on: ubuntu-latest","    needs: prebuild","","    steps:","      - uses: actions/checkout@v3","","      - uses: actions/setup-python@v4","        with:","          python-version: \"3.11\"","","      - name: Install dependencies","        run: |","          pip install --upgrade pip","          pip install -r requirements.txt","","      - name: Collect static files","        run: |","          python manage.py collectstatic --noinput","","","  # ============================================================","  # 3️⃣ PACKAGE STAGE","  # ============================================================","  package:","    runs-on: ubuntu-latest","    needs: build","","    steps:","      - uses: actions/checkout@v3","","      - name: Create ZIP for Elastic Beanstalk","        run: |","          zip -r deploy.zip . -x \"*.git*\" \".github/*\"","","      - name: Upload package as artifact","        uses: actions/upload-artifact@v4","        with:","          name: deploy-package","          path: deploy.zip","","","  # ============================================================","  # 4️⃣ DEPLOYMENT STAGE","  # ============================================================","  deploy:","    runs-on: ubuntu-latest","    needs: package","","    steps:","      - name: Download artifact","        uses: actions/download-artifact@v4","        with:","          name: deploy-package","","      - name: Configure AWS Credentials","        uses: aws-actions/configure-aws-credentials@v4","        with:","          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}","          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","          aws-region: us-east-1","","      - name: Deploy to Elastic Beanstalk","        uses: einaregilsson/beanstalk-deploy@v21","        with:","          aws_access_key: ${{ secrets.AWS_ACCESS_KEY_ID }}","          aws_secret_key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","          application_name: Devops-x23300841-eb","          environment_name: Devops-x23300841-eb-env","          region: us-east-1","          deployment_package: deploy.zip","          version_label: \"build-${{ github.run_number }}\"","          wait_for_deployment: true",""]}],[{"start":{"row":48,"column":0},"end":{"row":51,"column":50},"action":"remove","lines":["","      - name: Collect static files","        run: |","          python manage.py collectstatic --noinput"],"id":21}],[{"start":{"row":49,"column":0},"end":{"row":50,"column":0},"action":"remove","lines":["",""],"id":22},{"start":{"row":48,"column":0},"end":{"row":49,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":0,"column":0},"end":{"row":101,"column":0},"action":"remove","lines":["name: Django CI/CD to Elastic Beanstalk","","on:","  push:","    branches:","      - main","","jobs:","","  # ============================================================","  # 1️⃣ PREBUILD STAGE","  # ============================================================","  prebuild:","    runs-on: ubuntu-latest","","    steps:","      - name: Checkout repo","        uses: actions/checkout@v3","","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: \"3.11\"","","      - name: Install OS Dependencies","        run: |","          sudo apt-get update","          sudo apt-get install -y jq unzip wget","","","  # ============================================================","  # 2️⃣ BUILD STAGE","  # ============================================================","  build:","    runs-on: ubuntu-latest","    needs: prebuild","","    steps:","      - uses: actions/checkout@v3","","      - uses: actions/setup-python@v4","        with:","          python-version: \"3.11\"","","      - name: Install dependencies","        run: |","          pip install --upgrade pip","          pip install -r requirements.txt","","  # ============================================================","  # 3️⃣ PACKAGE STAGE","  # ============================================================","  package:","    runs-on: ubuntu-latest","    needs: build","","    steps:","      - uses: actions/checkout@v3","","      - name: Create ZIP for Elastic Beanstalk","        run: |","          zip -r deploy.zip . -x \"*.git*\" \".github/*\"","","      - name: Upload package as artifact","        uses: actions/upload-artifact@v4","        with:","          name: deploy-package","          path: deploy.zip","","","  # ============================================================","  # 4️⃣ DEPLOYMENT STAGE","  # ============================================================","  deploy:","    runs-on: ubuntu-latest","    needs: package","","    steps:","      - name: Download artifact","        uses: actions/download-artifact@v4","        with:","          name: deploy-package","","      - name: Configure AWS Credentials","        uses: aws-actions/configure-aws-credentials@v4","        with:","          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}","          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","          aws-region: us-east-1","","      - name: Deploy to Elastic Beanstalk","        uses: einaregilsson/beanstalk-deploy@v21","        with:","          aws_access_key: ${{ secrets.AWS_ACCESS_KEY_ID }}","          aws_secret_key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","          application_name: Devops-x23300841-eb","          environment_name: Devops-x23300841-eb-env","          region: us-east-1","          deployment_package: deploy.zip","          version_label: \"build-${{ github.run_number }}\"","          wait_for_deployment: true",""],"id":23},{"start":{"row":0,"column":0},"end":{"row":102,"column":0},"action":"insert","lines":["name: Django CI/CD to Elastic Beanstalk","","on:","  push:","    branches:","      - main","","jobs:","","  # ============================================================","  # 1️⃣ PREBUILD STAGE","  # ============================================================","  prebuild:","    runs-on: ubuntu-latest","","    steps:","      - name: Checkout repo","        uses: actions/checkout@v3","","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: \"3.11\"","","      - name: Install OS Dependencies","        run: |","          sudo apt-get update","          sudo apt-get install -y jq unzip wget","","","  # ============================================================","  # 2️⃣ BUILD STAGE","  # ============================================================","  build:","    runs-on: ubuntu-latest","    needs: prebuild","","    steps:","      - uses: actions/checkout@v3","","      - uses: actions/setup-python@v4","        with:","          python-version: \"3.11\"","","      - name: Install dependencies","        run: |","          pip install --upgrade pip","          pip install -r requirements.txt","","","  # ============================================================","  # 3️⃣ PACKAGE STAGE","  # ============================================================","  package:","    runs-on: ubuntu-latest","    needs: build","","    steps:","      - uses: actions/checkout@v3","","      - name: Create ZIP for Elastic Beanstalk","        run: |","          zip -r deploy.zip . -x \"*.git*\" \".github/*\"","","      - name: Upload package as artifact","        uses: actions/upload-artifact@v4","        with:","          name: deploy-package","          path: deploy.zip","","","  # ============================================================","  # 4️⃣ DEPLOYMENT STAGE","  # ============================================================","  deploy:","    runs-on: ubuntu-latest","    needs: package","","    steps:","      - name: Download artifact","        uses: actions/download-artifact@v4","        with:","          name: deploy-package","","      - name: Configure AWS Credentials","        uses: aws-actions/configure-aws-credentials@v4","        with:","          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}","          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","          aws-region: us-east-1","","      - name: Deploy to Elastic Beanstalk","        uses: einaregilsson/beanstalk-deploy@v21","        with:","          aws_access_key: ${{ secrets.AWS_ACCESS_KEY_ID }}","          aws_secret_key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","          application_name: Devops-x23300841-eb","          environment_name: Devops-x23300841-eb-env","          region: us-east-1","          deployment_package: deploy.zip","          version_label: \"build-${{ github.run_number }}\"","          wait_for_deployment: true",""]}],[{"start":{"row":102,"column":0},"end":{"row":103,"column":0},"action":"insert","lines":["",""],"id":24},{"start":{"row":103,"column":0},"end":{"row":104,"column":0},"action":"insert","lines":["",""]},{"start":{"row":104,"column":0},"end":{"row":105,"column":0},"action":"insert","lines":["",""]},{"start":{"row":105,"column":0},"end":{"row":105,"column":1},"action":"insert","lines":["#"]},{"start":{"row":105,"column":1},"end":{"row":105,"column":2},"action":"insert","lines":["-"]},{"start":{"row":105,"column":2},"end":{"row":105,"column":3},"action":"insert","lines":["-"]},{"start":{"row":105,"column":3},"end":{"row":105,"column":4},"action":"insert","lines":["-"]},{"start":{"row":105,"column":4},"end":{"row":105,"column":5},"action":"insert","lines":["-"]},{"start":{"row":105,"column":5},"end":{"row":105,"column":6},"action":"insert","lines":["-"]},{"start":{"row":105,"column":6},"end":{"row":105,"column":7},"action":"insert","lines":["-"]}],[{"start":{"row":105,"column":7},"end":{"row":105,"column":8},"action":"insert","lines":["-"],"id":25},{"start":{"row":105,"column":8},"end":{"row":105,"column":9},"action":"insert","lines":["-"]},{"start":{"row":105,"column":9},"end":{"row":105,"column":10},"action":"insert","lines":["-"]},{"start":{"row":105,"column":10},"end":{"row":105,"column":11},"action":"insert","lines":["-"]},{"start":{"row":105,"column":11},"end":{"row":105,"column":12},"action":"insert","lines":["-"]},{"start":{"row":105,"column":12},"end":{"row":105,"column":13},"action":"insert","lines":["-"]},{"start":{"row":105,"column":13},"end":{"row":105,"column":14},"action":"insert","lines":["-"]},{"start":{"row":105,"column":14},"end":{"row":105,"column":15},"action":"insert","lines":["-"]},{"start":{"row":105,"column":15},"end":{"row":105,"column":16},"action":"insert","lines":["-"]},{"start":{"row":105,"column":16},"end":{"row":105,"column":17},"action":"insert","lines":["-"]},{"start":{"row":105,"column":17},"end":{"row":105,"column":18},"action":"insert","lines":["-"]},{"start":{"row":105,"column":18},"end":{"row":105,"column":19},"action":"insert","lines":["-"]},{"start":{"row":105,"column":19},"end":{"row":105,"column":20},"action":"insert","lines":["-"]},{"start":{"row":105,"column":20},"end":{"row":105,"column":21},"action":"insert","lines":["-"]},{"start":{"row":105,"column":21},"end":{"row":105,"column":22},"action":"insert","lines":["-"]},{"start":{"row":105,"column":22},"end":{"row":105,"column":23},"action":"insert","lines":["-"]},{"start":{"row":105,"column":23},"end":{"row":105,"column":24},"action":"insert","lines":["-"]},{"start":{"row":105,"column":24},"end":{"row":105,"column":25},"action":"insert","lines":["-"]},{"start":{"row":105,"column":25},"end":{"row":105,"column":26},"action":"insert","lines":["-"]},{"start":{"row":105,"column":26},"end":{"row":105,"column":27},"action":"insert","lines":["-"]},{"start":{"row":105,"column":27},"end":{"row":105,"column":28},"action":"insert","lines":["-"]},{"start":{"row":105,"column":28},"end":{"row":105,"column":29},"action":"insert","lines":["-"]},{"start":{"row":105,"column":29},"end":{"row":105,"column":30},"action":"insert","lines":["-"]},{"start":{"row":105,"column":30},"end":{"row":105,"column":31},"action":"insert","lines":["-"]},{"start":{"row":105,"column":31},"end":{"row":105,"column":32},"action":"insert","lines":["-"]},{"start":{"row":105,"column":32},"end":{"row":105,"column":33},"action":"insert","lines":["-"]},{"start":{"row":105,"column":33},"end":{"row":105,"column":34},"action":"insert","lines":["-"]},{"start":{"row":105,"column":34},"end":{"row":105,"column":35},"action":"insert","lines":["-"]},{"start":{"row":105,"column":35},"end":{"row":105,"column":36},"action":"insert","lines":["-"]},{"start":{"row":105,"column":36},"end":{"row":105,"column":37},"action":"insert","lines":["-"]},{"start":{"row":105,"column":37},"end":{"row":105,"column":38},"action":"insert","lines":["-"]},{"start":{"row":105,"column":38},"end":{"row":105,"column":39},"action":"insert","lines":["-"]},{"start":{"row":105,"column":39},"end":{"row":105,"column":40},"action":"insert","lines":["-"]},{"start":{"row":105,"column":40},"end":{"row":105,"column":41},"action":"insert","lines":["-"]},{"start":{"row":105,"column":41},"end":{"row":105,"column":42},"action":"insert","lines":["-"]},{"start":{"row":105,"column":42},"end":{"row":105,"column":43},"action":"insert","lines":["-"]},{"start":{"row":105,"column":43},"end":{"row":105,"column":44},"action":"insert","lines":["-"]},{"start":{"row":105,"column":44},"end":{"row":105,"column":45},"action":"insert","lines":["-"]},{"start":{"row":105,"column":45},"end":{"row":105,"column":46},"action":"insert","lines":["-"]},{"start":{"row":105,"column":46},"end":{"row":105,"column":47},"action":"insert","lines":["-"]},{"start":{"row":105,"column":47},"end":{"row":105,"column":48},"action":"insert","lines":["-"]},{"start":{"row":105,"column":48},"end":{"row":105,"column":49},"action":"insert","lines":["-"]},{"start":{"row":105,"column":49},"end":{"row":105,"column":50},"action":"insert","lines":["-"]},{"start":{"row":105,"column":50},"end":{"row":105,"column":51},"action":"insert","lines":["-"]},{"start":{"row":105,"column":51},"end":{"row":105,"column":52},"action":"insert","lines":["-"]},{"start":{"row":105,"column":52},"end":{"row":105,"column":53},"action":"insert","lines":["-"]},{"start":{"row":105,"column":53},"end":{"row":105,"column":54},"action":"insert","lines":["-"]},{"start":{"row":105,"column":54},"end":{"row":105,"column":55},"action":"insert","lines":["-"]},{"start":{"row":105,"column":55},"end":{"row":105,"column":56},"action":"insert","lines":["-"]},{"start":{"row":105,"column":56},"end":{"row":105,"column":57},"action":"insert","lines":["-"]},{"start":{"row":105,"column":57},"end":{"row":105,"column":58},"action":"insert","lines":["-"]},{"start":{"row":105,"column":58},"end":{"row":105,"column":59},"action":"insert","lines":["-"]},{"start":{"row":105,"column":59},"end":{"row":105,"column":60},"action":"insert","lines":["-"]},{"start":{"row":105,"column":60},"end":{"row":105,"column":61},"action":"insert","lines":["-"]},{"start":{"row":105,"column":61},"end":{"row":105,"column":62},"action":"insert","lines":["-"]},{"start":{"row":105,"column":62},"end":{"row":105,"column":63},"action":"insert","lines":["-"]},{"start":{"row":105,"column":63},"end":{"row":105,"column":64},"action":"insert","lines":["-"]},{"start":{"row":105,"column":64},"end":{"row":105,"column":65},"action":"insert","lines":["-"]},{"start":{"row":105,"column":65},"end":{"row":105,"column":66},"action":"insert","lines":["-"]},{"start":{"row":105,"column":66},"end":{"row":105,"column":67},"action":"insert","lines":["-"]},{"start":{"row":105,"column":67},"end":{"row":105,"column":68},"action":"insert","lines":["-"]}],[{"start":{"row":105,"column":68},"end":{"row":105,"column":69},"action":"insert","lines":["-"],"id":26},{"start":{"row":105,"column":69},"end":{"row":105,"column":70},"action":"insert","lines":["-"]},{"start":{"row":105,"column":70},"end":{"row":105,"column":71},"action":"insert","lines":["-"]},{"start":{"row":105,"column":71},"end":{"row":105,"column":72},"action":"insert","lines":["-"]},{"start":{"row":105,"column":72},"end":{"row":105,"column":73},"action":"insert","lines":["-"]},{"start":{"row":105,"column":73},"end":{"row":105,"column":74},"action":"insert","lines":["-"]},{"start":{"row":105,"column":74},"end":{"row":105,"column":75},"action":"insert","lines":["-"]},{"start":{"row":105,"column":75},"end":{"row":105,"column":76},"action":"insert","lines":["-"]},{"start":{"row":105,"column":76},"end":{"row":105,"column":77},"action":"insert","lines":["-"]},{"start":{"row":105,"column":77},"end":{"row":105,"column":78},"action":"insert","lines":["-"]},{"start":{"row":105,"column":78},"end":{"row":105,"column":79},"action":"insert","lines":["-"]},{"start":{"row":105,"column":79},"end":{"row":105,"column":80},"action":"insert","lines":["-"]},{"start":{"row":105,"column":80},"end":{"row":105,"column":81},"action":"insert","lines":["-"]},{"start":{"row":105,"column":81},"end":{"row":105,"column":82},"action":"insert","lines":["-"]},{"start":{"row":105,"column":82},"end":{"row":105,"column":83},"action":"insert","lines":["-"]},{"start":{"row":105,"column":83},"end":{"row":105,"column":84},"action":"insert","lines":["-"]},{"start":{"row":105,"column":84},"end":{"row":105,"column":85},"action":"insert","lines":["-"]},{"start":{"row":105,"column":85},"end":{"row":105,"column":86},"action":"insert","lines":["-"]},{"start":{"row":105,"column":86},"end":{"row":105,"column":87},"action":"insert","lines":["-"]},{"start":{"row":105,"column":87},"end":{"row":105,"column":88},"action":"insert","lines":["-"]},{"start":{"row":105,"column":88},"end":{"row":105,"column":89},"action":"insert","lines":["-"]},{"start":{"row":105,"column":89},"end":{"row":105,"column":90},"action":"insert","lines":["-"]},{"start":{"row":105,"column":90},"end":{"row":105,"column":91},"action":"insert","lines":["-"]},{"start":{"row":105,"column":91},"end":{"row":105,"column":92},"action":"insert","lines":["-"]},{"start":{"row":105,"column":92},"end":{"row":105,"column":93},"action":"insert","lines":["-"]},{"start":{"row":105,"column":93},"end":{"row":105,"column":94},"action":"insert","lines":["-"]},{"start":{"row":105,"column":94},"end":{"row":105,"column":95},"action":"insert","lines":["-"]},{"start":{"row":105,"column":95},"end":{"row":105,"column":96},"action":"insert","lines":["-"]},{"start":{"row":105,"column":96},"end":{"row":105,"column":97},"action":"insert","lines":["-"]},{"start":{"row":105,"column":97},"end":{"row":105,"column":98},"action":"insert","lines":["-"]},{"start":{"row":105,"column":98},"end":{"row":105,"column":99},"action":"insert","lines":["-"]},{"start":{"row":105,"column":99},"end":{"row":105,"column":100},"action":"insert","lines":["-"]},{"start":{"row":105,"column":100},"end":{"row":105,"column":101},"action":"insert","lines":["-"]},{"start":{"row":105,"column":101},"end":{"row":105,"column":102},"action":"insert","lines":["-"]}],[{"start":{"row":105,"column":102},"end":{"row":106,"column":0},"action":"insert","lines":["",""],"id":27},{"start":{"row":106,"column":0},"end":{"row":107,"column":0},"action":"insert","lines":["",""]},{"start":{"row":107,"column":0},"end":{"row":108,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":108,"column":0},"end":{"row":285,"column":36},"action":"insert","lines":["name: Django DevOps CI/CD Pipeline","","on:","  push:","    branches:","      - main","","jobs:","","  # =====================================================================","  # 1️⃣ PRE-BUILD STAGE (Sonar, Java, Dependencies)","  # =====================================================================","  prebuild:","    runs-on: ubuntu-latest","","    steps:","      - name: Checkout repo","        uses: actions/checkout@v3","","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: \"3.11\"","","      - name: Install Python Dependencies","        run: |","          python -m pip install --upgrade pip","          pip install -r requirements.txt","","      - name: Install OS Dependencies","        run: |","          sudo apt-get update","          sudo apt-get install -y jq unzip wget","","      - name: Install Java 17 (Amazon Corretto)","        run: |","          sudo apt-get purge -y openjdk*","          sudo apt-get install -y java-common","          wget https://corretto.aws/downloads/latest/amazon-corretto-17-x64-linux-jdk.deb","          sudo dpkg -i amazon-corretto-17-x64-linux-jdk.deb","          export PATH=$JAVA_HOME/bin:$PATH","          echo \"$java -version\"","          echo \"Java version: $(java --version)\"","          echo \"Java installation done\"","","      ","","","      # - name: Install Sonar Scanner","      #   run: |","      #     wget https://binaries.sonarsource.com/Distribution/sonar-scanner-cli/sonar-scanner-cli-5.0.1.3006-linux.zip","      #     unzip sonar-scanner-cli-5.0.1.3006-linux.zip","      #     export PATH=$PATH:./sonar-scanner-5.0.1.3006-linux/bin/","      #     sonar-scanner --version","      #     echo \"pre build stage completed\"","","","","  # =====================================================================","  # 2️⃣ BUILD + TEST STAGE (Sonar Scan, Pylint, Django Tests)","  # =====================================================================","  build_and_test:","    runs-on: ubuntu-latest","    needs: prebuild","","    steps:","      - name: Checkout repo","        uses: actions/checkout@v3","","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: \"3.11\"","","      - name: Install Dependencies","        run: |","          pip install --upgrade pip","          pip install -r requirements.txt","          pip install pylint","","      - name: Run collectstatic","        run: |","          python manage.py collectstatic --noinput","","      # -------------------------","      # Pylint full project linting","      # -------------------------","      - name: Run Pylint","        continue-on-error: true","        run: |","          pylint spend_wise || true","","      # -------------------------","      # Django Unit Tests","      # -------------------------","      - name: Run Django Tests","        run: |","          python manage.py test home.tests.LoginTest","","      # -------------------------","      # Sonar Cloud Scan","      # -------------------------","","","      - name: Install Sonar Scanner","        run: |","          wget https://binaries.sonarsource.com/Distribution/sonar-scanner-cli/sonar-scanner-cli-5.0.1.3006-linux.zip","          unzip sonar-scanner-cli-5.0.1.3006-linux.zip","          mv sonar-scanner-5.0.1.3006-linux sonar-scanner","          echo \"${{ github.workspace }}/sonar-scanner/bin\" >> $GITHUB_PATH","","      - name: Version","        run: |","          sonar-scanner --version","      ","      - name: Run Sonar Cloud Scan","        env:","          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}","          SONAR_PROJECT_KEY: ${{ secrets.SONAR_PROJECT_KEY }}","          SONAR_ORG: ${{ secrets.SONAR_ORG }}","        run: |","          sonar-scanner \\","            -Dsonar.login=$SONAR_TOKEN \\","            -Dsonar.host.url=https://sonarcloud.io \\","            -Dsonar.projectKey=$SONAR_PROJECT_KEY \\","            -Dsonar.organization=$SONAR_ORG \\","            -Dsonar.coverage.exclusions=**/* || true","","          sleep 5","          curl \"https://sonarcloud.io/api/qualitygates/project_status?projectKey=$SONAR_PROJECT_KEY\" > sonar_result.json","          cat sonar_result.json","","      # -------------------------","      # Create Deployment Package","      # -------------------------","      - name: Create deployment ZIP","        run: |","          zip -r deploy.zip . -x \"*.git*\"","","      - name: Upload Build Artifact","        uses: actions/upload-artifact@v4","        with:","          name: deploy-package","          path: deploy.zip","","  # # =====================================================================","  # # 3️⃣ DEPLOYMENT STAGE (AWS Elastic Beanstalk)","  # # =====================================================================","  deploy:","    runs-on: ubuntu-latest","    needs: build_and_test","","    steps:","      - name: Download artifact","        uses: actions/download-artifact@v4","        with:","          name: deploy-package","","      - name: Configure AWS Credentials","        uses: aws-actions/configure-aws-credentials@v2","        with:","          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}","          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","          aws-session-token: ${{ secrets.AWS_SESSION_TOKEN }}","          aws-region: us-east-1","","      - name: Deploy to Elastic Beanstalk","        uses: einaregilsson/beanstalk-deploy@v21","        with:","          aws_access_key: ${{ secrets.AWS_ACCESS_KEY_ID }}","          aws_secret_key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","          aws_session_token: ${{ secrets.AWS_SESSION_TOKEN }}","          application_name: Devops-x23300841-eb","          environment_name: Devops-x23300841-eb-env","          region: us-east-1","          version_label: \"build-${{ github.run_number }}\"","          deployment_package: deploy.zip","          wait_for_deployment: false"],"id":28}],[{"start":{"row":74,"column":2},"end":{"row":101,"column":35},"action":"remove","lines":["deploy:","    runs-on: ubuntu-latest","    needs: package","","    steps:","      - name: Download artifact","        uses: actions/download-artifact@v4","        with:","          name: deploy-package","","      - name: Configure AWS Credentials","        uses: aws-actions/configure-aws-credentials@v4","        with:","          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}","          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","          aws-region: us-east-1","","      - name: Deploy to Elastic Beanstalk","        uses: einaregilsson/beanstalk-deploy@v21","        with:","          aws_access_key: ${{ secrets.AWS_ACCESS_KEY_ID }}","          aws_secret_key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","          application_name: Devops-x23300841-eb","          environment_name: Devops-x23300841-eb-env","          region: us-east-1","          deployment_package: deploy.zip","          version_label: \"build-${{ github.run_number }}\"","          wait_for_deployment: true"],"id":29},{"start":{"row":74,"column":2},"end":{"row":103,"column":36},"action":"insert","lines":["deploy:","    runs-on: ubuntu-latest","    needs: build_and_test","","    steps:","      - name: Download artifact","        uses: actions/download-artifact@v4","        with:","          name: deploy-package","","      - name: Configure AWS Credentials","        uses: aws-actions/configure-aws-credentials@v2","        with:","          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}","          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","          aws-session-token: ${{ secrets.AWS_SESSION_TOKEN }}","          aws-region: us-east-1","","      - name: Deploy to Elastic Beanstalk","        uses: einaregilsson/beanstalk-deploy@v21","        with:","          aws_access_key: ${{ secrets.AWS_ACCESS_KEY_ID }}","          aws_secret_key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","          aws_session_token: ${{ secrets.AWS_SESSION_TOKEN }}","          application_name: Devops-x23300841-eb","          environment_name: Devops-x23300841-eb-env","          region: us-east-1","          version_label: \"build-${{ github.run_number }}\"","          deployment_package: deploy.zip","          wait_for_deployment: false"]}],[{"start":{"row":108,"column":0},"end":{"row":287,"column":36},"action":"remove","lines":["","","name: Django DevOps CI/CD Pipeline","","on:","  push:","    branches:","      - main","","jobs:","","  # =====================================================================","  # 1️⃣ PRE-BUILD STAGE (Sonar, Java, Dependencies)","  # =====================================================================","  prebuild:","    runs-on: ubuntu-latest","","    steps:","      - name: Checkout repo","        uses: actions/checkout@v3","","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: \"3.11\"","","      - name: Install Python Dependencies","        run: |","          python -m pip install --upgrade pip","          pip install -r requirements.txt","","      - name: Install OS Dependencies","        run: |","          sudo apt-get update","          sudo apt-get install -y jq unzip wget","","      - name: Install Java 17 (Amazon Corretto)","        run: |","          sudo apt-get purge -y openjdk*","          sudo apt-get install -y java-common","          wget https://corretto.aws/downloads/latest/amazon-corretto-17-x64-linux-jdk.deb","          sudo dpkg -i amazon-corretto-17-x64-linux-jdk.deb","          export PATH=$JAVA_HOME/bin:$PATH","          echo \"$java -version\"","          echo \"Java version: $(java --version)\"","          echo \"Java installation done\"","","      ","","","      # - name: Install Sonar Scanner","      #   run: |","      #     wget https://binaries.sonarsource.com/Distribution/sonar-scanner-cli/sonar-scanner-cli-5.0.1.3006-linux.zip","      #     unzip sonar-scanner-cli-5.0.1.3006-linux.zip","      #     export PATH=$PATH:./sonar-scanner-5.0.1.3006-linux/bin/","      #     sonar-scanner --version","      #     echo \"pre build stage completed\"","","","","  # =====================================================================","  # 2️⃣ BUILD + TEST STAGE (Sonar Scan, Pylint, Django Tests)","  # =====================================================================","  build_and_test:","    runs-on: ubuntu-latest","    needs: prebuild","","    steps:","      - name: Checkout repo","        uses: actions/checkout@v3","","      - name: Set up Python","        uses: actions/setup-python@v4","        with:","          python-version: \"3.11\"","","      - name: Install Dependencies","        run: |","          pip install --upgrade pip","          pip install -r requirements.txt","          pip install pylint","","      - name: Run collectstatic","        run: |","          python manage.py collectstatic --noinput","","      # -------------------------","      # Pylint full project linting","      # -------------------------","      - name: Run Pylint","        continue-on-error: true","        run: |","          pylint spend_wise || true","","      # -------------------------","      # Django Unit Tests","      # -------------------------","      - name: Run Django Tests","        run: |","          python manage.py test home.tests.LoginTest","","      # -------------------------","      # Sonar Cloud Scan","      # -------------------------","","","      - name: Install Sonar Scanner","        run: |","          wget https://binaries.sonarsource.com/Distribution/sonar-scanner-cli/sonar-scanner-cli-5.0.1.3006-linux.zip","          unzip sonar-scanner-cli-5.0.1.3006-linux.zip","          mv sonar-scanner-5.0.1.3006-linux sonar-scanner","          echo \"${{ github.workspace }}/sonar-scanner/bin\" >> $GITHUB_PATH","","      - name: Version","        run: |","          sonar-scanner --version","      ","      - name: Run Sonar Cloud Scan","        env:","          SONAR_TOKEN: ${{ secrets.SONAR_TOKEN }}","          SONAR_PROJECT_KEY: ${{ secrets.SONAR_PROJECT_KEY }}","          SONAR_ORG: ${{ secrets.SONAR_ORG }}","        run: |","          sonar-scanner \\","            -Dsonar.login=$SONAR_TOKEN \\","            -Dsonar.host.url=https://sonarcloud.io \\","            -Dsonar.projectKey=$SONAR_PROJECT_KEY \\","            -Dsonar.organization=$SONAR_ORG \\","            -Dsonar.coverage.exclusions=**/* || true","","          sleep 5","          curl \"https://sonarcloud.io/api/qualitygates/project_status?projectKey=$SONAR_PROJECT_KEY\" > sonar_result.json","          cat sonar_result.json","","      # -------------------------","      # Create Deployment Package","      # -------------------------","      - name: Create deployment ZIP","        run: |","          zip -r deploy.zip . -x \"*.git*\"","","      - name: Upload Build Artifact","        uses: actions/upload-artifact@v4","        with:","          name: deploy-package","          path: deploy.zip","","  # # =====================================================================","  # # 3️⃣ DEPLOYMENT STAGE (AWS Elastic Beanstalk)","  # # =====================================================================","  deploy:","    runs-on: ubuntu-latest","    needs: build_and_test","","    steps:","      - name: Download artifact","        uses: actions/download-artifact@v4","        with:","          name: deploy-package","","      - name: Configure AWS Credentials","        uses: aws-actions/configure-aws-credentials@v2","        with:","          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}","          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","          aws-session-token: ${{ secrets.AWS_SESSION_TOKEN }}","          aws-region: us-east-1","","      - name: Deploy to Elastic Beanstalk","        uses: einaregilsson/beanstalk-deploy@v21","        with:","          aws_access_key: ${{ secrets.AWS_ACCESS_KEY_ID }}","          aws_secret_key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}","          aws_session_token: ${{ secrets.AWS_SESSION_TOKEN }}","          application_name: Devops-x23300841-eb","          environment_name: Devops-x23300841-eb-env","          region: us-east-1","          version_label: \"build-${{ github.run_number }}\"","          deployment_package: deploy.zip","          wait_for_deployment: false"],"id":30}],[{"start":{"row":107,"column":0},"end":{"row":108,"column":0},"action":"remove","lines":["#-----------------------------------------------------------------------------------------------------",""],"id":31},{"start":{"row":106,"column":0},"end":{"row":107,"column":0},"action":"remove","lines":["",""]},{"start":{"row":105,"column":0},"end":{"row":106,"column":0},"action":"remove","lines":["",""]}],[{"start":{"row":98,"column":28},"end":{"row":98,"column":47},"action":"remove","lines":["Devops-x23300841-eb"],"id":32}],[{"start":{"row":99,"column":28},"end":{"row":99,"column":51},"action":"remove","lines":["Devops-x23300841-eb-env"],"id":33}],[{"start":{"row":99,"column":28},"end":{"row":99,"column":44},"action":"insert","lines":["X23282231-eb-env"],"id":34}],[{"start":{"row":98,"column":28},"end":{"row":98,"column":44},"action":"insert","lines":["X23282231-eb-env"],"id":35}],[{"start":{"row":98,"column":41},"end":{"row":98,"column":44},"action":"remove","lines":["env"],"id":36}],[{"start":{"row":98,"column":40},"end":{"row":98,"column":41},"action":"remove","lines":["-"],"id":37}]]},"ace":{"folds":[],"scrolltop":1107.8181865471452,"scrollleft":0,"selection":{"start":{"row":103,"column":36},"end":{"row":103,"column":36},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":78,"state":"start","mode":"ace/mode/yaml"}},"timestamp":1764939435370,"hash":"e6d13bcdfb4fc955f67a9764f5d24e4fefc8ea91"}